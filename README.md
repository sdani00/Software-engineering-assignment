## Setup Instructions

Tools needed:
Before you begin, ensure you have the following tools installed on your system:

Visual Studio: Annme integrated development environt (IDE) used for developing ASP.NET Core applications.
SQL Server Management Studio (SSMS): A software application that is used for configuring, managing, and administering all components within Microsoft SQL Server. It's necessary for database setup and management. 

After downloading making sure you have this installed, you can go ahead and clone the repository.

`git clone https://github.com/sdani00/Software-engineering-assignment`

Database Setup

Launch the project in Visual Studio.
Open the Package Manager Console: In Visual Studio, go to Tools -> NuGet Package Manager -> Package Manager Console.
Set the target project to -> ScheduleManager.DataAccess
Now, for the schema to be created locally, you need to run `update-database` in the Pacakge Manager Console.

Running The Application
Simply set the Web Project as a startup project, in this case, ScheduleManager.Web and then go ahead and run the application.


## Next Steps
After running the application, you can start using the existing features. But, If you want to have the notification feature (emails), you need to do a few more steps, I'll list them down below,
I'll also explain how User Secrets work in this file.


## Storing Credentials with User Secrets

This application contains an email notification feature which requires an account's credentials in order to send the emails.

## Secret Storage

Secrets are stored in a secrets.json file associated with a UserSecretsId tag (contains a GUID value). 

This UserSecretsId is added to the .csproj file, inside a PropertyGroup tag by running this command in the Package Manager Console:
```
dotnet user-secrets init --project ScheduleManager
```

The modified section from the ScheduleManager.csproj will look like this:
```
  <PropertyGroup>
    <TargetFramework>net6.0</TargetFramework>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    <UserSecretsId>1ce58320-0bae-4ef6-a41b-dbf7fc2b5672</UserSecretsId>
  </PropertyGroup>
```
Another way to do this is to right-click on the Startup project, ScheduleManager in our case, and then click on the "Manage User Secrets" option. This will also open our secrets.json file where secrets can be set.

## Setting Secrets

This application sends emails from a gmail account. The credentials we need to set are the email and a password generated by google to permit our application to access the account.

Credentials can be set either through commands:
```
dotnet user-secrets set "AuthMessageSenderOptions:email" "my.email@gmail.com" --project ScheduleManager
dotnet user-secrets set "AuthMessageSenderOptions:password" "123456789" --project ScheduleManager
```
Or by simply writing in the secrets.json file opened as explained at the end of the Secret Storage section:
```
{
  "AuthMessageSenderOptions": {
    "email": "my.email@gmail.com",
    "password": "123456789"
  }
}
```

## Mapping Secrets to a Class

The class we used is called AuthMessageSenderOptions and is placed in the ScheduleManager.Notification project:
```
namespace ScheduleManager.Notification.EmailSender
{
    public class AuthMessageSenderOptions
    {
        public string Email { get; set; }
        public string Password { get; set; }
    }

}
```
Mapping is done very easily, using the .NET Configuration API's object graph binding feature. This configuration will be added to the Program.cs file in our Startup project:
```
builder.Services.Configure<AuthMessageSenderOptions>(options => builder.Configuration.GetSection("AuthMessageSenderOptions").Bind(options));
```